"use strict";(self.webpackChunksprint_resources_availability=self.webpackChunksprint_resources_availability||[]).push([[945],{7945:($,p,o)=>{o.r(p),o.d(p,{AddTeammateComponent:()=>X});var s=o(7320),f=o(3198),n=o(5030);const Z=t=>{const a=t.parent?.get("availableDaysInAWeek");return a&&a.value>=t.value?null:{maxDaysAWeek:!0}};class c extends n.cw{constructor(a,r,i=new n.qu){super(i.group({name:new n.NI(a?.name,[n.kI.required,n.kI.minLength(2)]),availableDaysInAWeek:new n.NI(a?.availableDaysInAWeek,[n.kI.required,n.kI.min(1),n.kI.max(7)]),holidaysForNextSprint:new n.NI(a?.holidaysForNextSprint,{validators:[n.kI.required,n.kI.min(0)]}),meetingDaysAWeek:new n.NI(a?.meetingDaysAWeek,[n.kI.required,n.kI.min(0),Z]),isNewComer:new n.NI(a?.isNewComer)}).controls),this.teammate=a,this.maxDaysInASprintValidator=r,this.formBuilder=i,this.name=this.get("name"),this.availableDaysInAWeek=this.get("availableDaysInAWeek"),this.holidaysForNextSprint=this.get("holidaysForNextSprint"),this.meetingDaysAWeek=this.get("meetingDaysAWeek"),this.isNewComer=this.get("isNewComer")}}var e=o(9523);let y=(()=>{class t{transform(r,...i){return void 0===r?"Add new teammate":`Edit ${r.name}`}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=e.Yjl({name:"teammateFormTitle",type:t,pure:!0,standalone:!0}),t})();var l=o(8481),h=o(4755),g=(o(8931),o(1577)),d=o(1498);const x=["logout",(0,d.h)({outline:'<path d="M7,6H23v9.8h2V6a2,2,0,0,0-2-2H7A2,2,0,0,0,5,6V30a2,2,0,0,0,2,2H23a2,2,0,0,0,2-2H7Z"/><path d="M28.16,17.28a1,1,0,0,0-1.41,1.41L30.13,22H15.63a1,1,0,0,0-1,1,1,1,0,0,0,1,1h14.5l-3.38,3.46a1,1,0,1,0,1.41,1.41L34,23.07Z"/>',solid:'<path d="M23,4H7A2,2,0,0,0,5,6V30a2,2,0,0,0,2,2H23a2,2,0,0,0,2-2V24H15.63a1,1,0,0,1-1-1,1,1,0,0,1,1-1H25V6A2,2,0,0,0,23,4Z"/><path d="M28.16,17.28a1,1,0,0,0-1.41,1.41L30.13,22H25v2h5.13l-3.38,3.46a1,1,0,1,0,1.41,1.41L34,23.07Z"/>'})],I=["note",(0,d.h)({outline:'<path d="M28,30H6V8H19.22l2-2H6A2,2,0,0,0,4,8V30a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V15l-2,2Z"/><path d="M33.53,5.84,30.16,2.47a1.61,1.61,0,0,0-2.28,0L14.17,16.26l-1.11,4.81A1.61,1.61,0,0,0,14.63,23,1.69,1.69,0,0,0,15,23l4.85-1.07L33.53,8.12A1.61,1.61,0,0,0,33.53,5.84ZM18.81,20.08l-3.66.81L16,17.26,26.32,6.87l2.82,2.82ZM30.27,8.56,27.45,5.74,29,4.16,31.84,7Z"/>',solid:'<path d="M33,6.4,29.3,2.7a1.71,1.71,0,0,0-2.36,0L23.65,6H6A2,2,0,0,0,4,8V30a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V11.76l3-3A1.67,1.67,0,0,0,33,6.4ZM18.83,20.13l-4.19.93,1-4.15,9.55-9.57,3.23,3.23ZM29.5,9.43,26.27,6.2l1.85-1.85,3.23,3.23Z"/>'})],b=["new",(0,d.h)({outline:'<path d="M34.59,23l-4.08-5,4-4.9a1.82,1.82,0,0,0,.23-1.94A1.93,1.93,0,0,0,32.94,10h-31A1.91,1.91,0,0,0,0,11.88V24.13A1.91,1.91,0,0,0,1.94,26H33.05a1.93,1.93,0,0,0,1.77-1.09A1.82,1.82,0,0,0,34.59,23ZM2,24V12H32.78l-4.84,5.93L32.85,24Z"/><polygon points="9.39 19.35 6.13 15 5 15 5 21.18 6.13 21.18 6.13 16.84 9.39 21.18 10.51 21.18 10.51 15 9.39 15 9.39 19.35"/><polygon points="12.18 21.18 16.84 21.18 16.84 20.16 13.31 20.16 13.31 18.55 16.5 18.55 16.5 17.52 13.31 17.52 13.31 16.03 16.84 16.03 16.84 15 12.18 15 12.18 21.18"/><polygon points="24.52 19.43 23.06 15 21.84 15 20.37 19.43 19.05 15 17.82 15 19.78 21.18 20.89 21.18 22.45 16.59 24 21.18 25.13 21.18 27.08 15 25.85 15 24.52 19.43"/>',solid:'<path d="M34.11,24.49l-3.92-6.62,3.88-6.35A1,1,0,0,0,33.22,10H2a2,2,0,0,0-2,2V24a2,2,0,0,0,2,2H33.25A1,1,0,0,0,34.11,24.49Zm-23.6-3.31H9.39L6.13,16.84v4.35H5V15H6.13l3.27,4.35V15h1.12ZM16.84,16H13.31v1.49h3.2v1h-3.2v1.61h3.53v1H12.18V15h4.65Zm8.29,5.16H24l-1.55-4.59L20.9,21.18H19.78l-2-6.18H19l1.32,4.43L21.84,15h1.22l1.46,4.43L25.85,15h1.23Z"/>'})];var T=o(9591),N=o(7908),C=o(4004),D=o(4986),H=o(7272),A=o(5698),k=o(4482),V=o(5403),S=o(5032),q=o(9718),W=o(5577);function v(t,a){return a?r=>(0,H.z)(a.pipe((0,A.q)(1),function U(){return(0,k.e)((t,a)=>{t.subscribe((0,V.x)(a,S.Z))})}()),r.pipe(v(t))):(0,W.z)((r,i)=>t(r,i).pipe((0,A.q)(1),(0,q.h)(r)))}var F=o(5963),M=o(1528);let L=(()=>{class t{constructor(r){this.parametersService=r}validate(r){const i=r.get("availableDaysInAWeek"),m=r.get("holidaysForNextSprint");return this.parametersService.getParameters().pipe((0,C.U)(u=>i&&m&&i.value*u.nbWeeksForOneSprint>=m.value?{maxDaysASprint:!0}:null),function w(t,a=D.z){const r=(0,F.H)(t,a);return v(()=>r)}(500))}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(M.T))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Y(t,a){1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1,"This is a required field"),e.qZA())}function J(t,a){if(1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1),e.qZA()),2&t){const r=a.error;e.xp6(1),e.hij("Must be at least ",r.requiredLength," characters")}}function Q(t,a){1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1,"This is a required field"),e.qZA())}function E(t,a){1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1,"Lower value is 1"),e.qZA())}function z(t,a){1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1,"Higher value is 7"),e.qZA())}function O(t,a){1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1,"This is a required field"),e.qZA())}function P(t,a){1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1,"Lower value is 0"),e.qZA())}function B(t,a){1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1,"This fied depends on the number of days in a week, and the number of weeks for a sprint. The value must be lower or equal to the max calculated value"),e.qZA())}function j(t,a){1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1,"This is a required field"),e.qZA())}function R(t,a){1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1,"Lower value is 0"),e.qZA())}function G(t,a){1&t&&(e.TgZ(0,"clr-control-error"),e._uU(1,"Higher value can't exceed the number of days in a week"),e.qZA())}function K(t,a){if(1&t&&(e.TgZ(0,"button",15),e._UZ(1,"cds-icon",16),e.qZA()),2&t){const r=e.oxw();e.Q6J("disabled",r.formTeammate.invalid)}}g.Q.addIcons(x,I,b);let X=(()=>{class t{constructor(r,i,m){this.teamService=r,this.maxDaysInASprintValidator=i,this.router=m,this.editedTeammate=void 0,this.formTeammate={}}ngOnInit(){this.formTeammate=new c(this.editedTeammate?this.editedTeammate:new s.u,this.maxDaysInASprintValidator)}ngOnChanges(r){if(r.editedTeammate){if(r.editedTeammate.currentValue===r.editedTeammate.previousValue)return;this.formTeammate=new c(r.editedTeammate.currentValue,this.maxDaysInASprintValidator)}}addTeammate(r){const i="saveAndRedirect"===r;if(this.formTeammate.valid)try{const m=new s.u(this.formTeammate.value.name,this.formTeammate.value.availableDaysInAWeek,this.formTeammate.value.holidaysForNextSprint,this.formTeammate.value.meetingDaysAWeek,!!this.formTeammate.value.isNewComer);this.editedTeammate?this.teamService.editTeammate(m,this.editedTeammate):this.teamService.addTeammate(m),this.formTeammate.reset(new s.u),i&&this.router.navigateByUrl("manage-team")}catch{}}getButtonText(){return this.editedTeammate?"edit":"add"}getButtonIcon(){return this.editedTeammate?"note":"new"}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(N.U),e.Y36(L),e.Y36(f.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-teammate"]],inputs:{editedTeammate:"editedTeammate"},standalone:!0,features:[e.TTD,e.jDz],decls:44,vars:19,consts:[["clrForm","","clrLayout","horizontal",3,"formGroup","ngSubmit"],["for","name"],["id","name","clrInput","","type","text","formControlName","name","required","","minlength","2"],[4,"clrIfError"],["for","availableDaysInAWeek"],["id","availableDaysInAWeek","clrInput","","type","number","min","1","max","7","step","0.5","required","","formControlName","availableDaysInAWeek"],["for","holidaysForNextSprint"],["id","holidaysForNextSprint","clrInput","","type","number","min","0","step","0.5","required","","formControlName","holidaysForNextSprint"],["for","meetingDaysAWeek"],["id","meetingDaysAWeek","clrInput","","type","number","step","0.1","min","0","required","","formControlName","meetingDaysAWeek"],["clrCheckbox","","type","checkbox","formControlName","isNewComer","name","isNewComer","value","1"],[1,"clr-row"],[1,"clr-col-2"],["name","saveAndRefresh","type","submit","aria-label","save and add a new teammate",1,"btn","btn-icon","btn-primary","btn-block",3,"disabled"],["class","btn btn-icon btn-secondary btn-block","name","saveAndRedirect","type","submit","aria-label","save and redirect to list teammate","title","save and redirect to list teammate",3,"disabled",4,"ngIf"],["name","saveAndRedirect","type","submit","aria-label","save and redirect to list teammate","title","save and redirect to list teammate",1,"btn","btn-icon","btn-secondary","btn-block",3,"disabled"],["shape","logout"]],template:function(r,i){1&r&&(e.TgZ(0,"h1"),e._uU(1),e.ALo(2,"teammateFormTitle"),e.qZA(),e.TgZ(3,"form",0),e.NdJ("ngSubmit",function(u){return i.addTeammate(u.submitter.name)}),e.TgZ(4,"clr-input-container")(5,"label",1),e._uU(6,"Name: "),e.qZA(),e._UZ(7,"input",2),e.TgZ(8,"clr-control-helper"),e._uU(9,"You must fill a name"),e.qZA(),e.YNc(10,Y,2,0,"clr-control-error",3),e.YNc(11,J,2,1,"clr-control-error",3),e.qZA(),e.TgZ(12,"clr-input-container")(13,"label",4),e._uU(14,"Available days in a week: "),e.qZA(),e._UZ(15,"input",5),e.YNc(16,Q,2,0,"clr-control-error",3),e.YNc(17,E,2,0,"clr-control-error",3),e.YNc(18,z,2,0,"clr-control-error",3),e.qZA(),e.TgZ(19,"clr-input-container")(20,"label",6),e._uU(21,"Holidays for next sprint: "),e.qZA(),e._UZ(22,"input",7),e.YNc(23,O,2,0,"clr-control-error",3),e.YNc(24,P,2,0,"clr-control-error",3),e.YNc(25,B,2,0,"clr-control-error",3),e.qZA(),e.TgZ(26,"clr-input-container")(27,"label",8),e._uU(28,"Meeting days in a week (float) : "),e.qZA(),e._UZ(29,"input",9),e.YNc(30,j,2,0,"clr-control-error",3),e.YNc(31,R,2,0,"clr-control-error",3),e.YNc(32,G,2,0,"clr-control-error",3),e.qZA(),e.TgZ(33,"clr-checkbox-container")(34,"label"),e._uU(35,"Is new teammate ? "),e.qZA(),e.TgZ(36,"clr-checkbox-wrapper"),e._UZ(37,"input",10),e.qZA()(),e.TgZ(38,"div",11)(39,"div",12)(40,"button",13),e._UZ(41,"cds-icon"),e.qZA()(),e.TgZ(42,"div",12),e.YNc(43,K,2,1,"button",14),e.qZA()()()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,17,i.editedTeammate)),e.xp6(2),e.Q6J("formGroup",i.formTeammate),e.xp6(7),e.Q6J("clrIfError","required"),e.xp6(1),e.Q6J("clrIfError","minlength"),e.xp6(5),e.Q6J("clrIfError","required"),e.xp6(1),e.Q6J("clrIfError","min"),e.xp6(1),e.Q6J("clrIfError","max"),e.xp6(5),e.Q6J("clrIfError","required"),e.xp6(1),e.Q6J("clrIfError","min"),e.xp6(1),e.Q6J("clrIfError","maxDaysASprint"),e.xp6(5),e.Q6J("clrIfError","required"),e.xp6(1),e.Q6J("clrIfError","min"),e.xp6(1),e.Q6J("clrIfError","maxDaysAWeek"),e.xp6(8),e.Q6J("disabled",i.formTeammate.invalid),e.uIk("title",i.getButtonText()),e.xp6(1),e.uIk("shape",i.getButtonIcon()),e.xp6(2),e.Q6J("ngIf",!i.editedTeammate))},dependencies:[h.ez,h.O5,T.j,T.c,f.Bz,n.UX,n._Y,n.Fj,n.wV,n.Wl,n.JJ,n.JL,n.Q7,n.wO,n.qQ,n.Fd,n.sg,n.u,l.AnW,l.MgK,l.VqA,l.CM6,l.qk9,l.YAP,l.mIp,l.KKC,l.Y_4,l.PEh,l.xRP,l.G55,y],encapsulation:2}),t})()}}]);