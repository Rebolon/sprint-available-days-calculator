import{a as S}from"./chunk-IOSLIUUI.js";import{a as j}from"./chunk-4665FI4M.js";import{b as x}from"./chunk-PFVGJA53.js";import{c as C,ca as g,da as F,ea as I,ga as M,j as D,k as T}from"./chunk-5T2A2BUS.js";import{Ga as n,Ha as s,Ra as m,Ua as c,Va as p,Ya as d,Za as v,aa as o,eb as f,hb as h,jb as b,ob as y,pb as u,rb as A}from"./chunk-36EA5VZS.js";function w(i,a){if(i&1&&(d(0,"clr-alert",0)(1,"clr-alert-item")(2,"span",1),h(3),u(4,"toFixed"),v()()()),i&2){let P=f();m("clrAlertType","info")("clrAlertClosable",!1),n(3),b(" ",A(4,3,P.availableDaysForTeam,2)," days available for the sprint. ")}}var q=(()=>{let a=class a{constructor(e,t,r){this.teamService=e,this.parametersService=t,this.alertService=r,this.parameters=x,this.team=[]}ngOnInit(){this.teamService.getTeammates().subscribe(e=>{this.team=e,this.calcAvailableDays()}),this.parametersService.getParameters().subscribe(e=>{this.parameters=e,this.calcAvailableDays()})}calcAvailableDays(){let e=[],t=0;this.team.forEach(r=>{try{let l=r.getAvailableDaysInSprint(this.parameters.nbWeeksForOneSprint);r.isNewComer&&(l=l-l*this.parameters.velocityRateForNewComer),t+=l}catch(l){e.push(l.message)}}),e.length?(this.availableDaysForTeam=void 0,this.alertService.setAlert(`Seems to be a problem in holidays of teammate and available days in a sprint: ${e.join(", ")}`)):this.availableDaysForTeam=Math.round((t-t*this.parameters.marginRate)*100)/100}};a.\u0275fac=function(t){return new(t||a)(s(D),s(T),s(S))},a.\u0275cmp=o({type:a,selectors:[["app-available-days"]],standalone:!0,features:[y],decls:1,vars:1,consts:[[3,"clrAlertType","clrAlertClosable"],[1,"alert-text"]],template:function(t,r){t&1&&c(0,w,5,6,"clr-alert",0),t&2&&p(0,r.team.length>0?0:-1)},dependencies:[C,M,g,F,I,j],encapsulation:2});let i=a;return i})();export{q as a};
