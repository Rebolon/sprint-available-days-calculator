import{a as P,b as R,c as b}from"./chunk-DDPZX22V.js";import{A as u,B as X,C as Z,D as ee,E as te,F as re,G as ie,H as ae,I as oe,J as ne,K as me,M as le,N as ce,O as de,P as se,Q as pe,R as ue,S as fe,T as he,U as ye,V as ve,W as be,X as xe,a as L,c as B,f as G,ia as Te,j,k as H,ka as Ce,la as _e,o as O,p as z,q as Y,u as $,v as J,w as d,x as K,y as Q,z as U}from"./chunk-J75FIYFQ.js";import{G as _,Ga as n,Ib as v,U as I,Xa as p,Ya as x,Z as S,Za as m,_ as y,ca as A,cb as i,da as g,db as r,eb as s,ga as k,hb as D,ib as N,ob as o,pb as F,qb as W,s as C,tb as q,ub as V,va as E,vb as M,wa as w}from"./chunk-C45MVH67.js";var Se=(()=>{let e=class e{transform(a,...l){return a===void 0?"Add new teammate":`Edit ${a.name}`}};e.\u0275fac=function(l){return new(l||e)},e.\u0275pipe=k({name:"teammateFormTitle",type:e,pure:!0,standalone:!0});let t=e;return t})();var Ae=(()=>{let e=class e{constructor(a){this.parametersService=a}validate(a){let l=a.get("availableDaysInAWeek"),c=a.get("holidaysForNextSprint");return Te(this.parametersService.getParameters).pipe(C(T=>l&&c&&l.value*T.nbWeeksForOneSprint>=c.value?{maxDaysASprint:!0}:null),_(500))}};e.\u0275fac=function(l){return new(l||e)(S(Ce))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ge=t=>{let e=t.parent?.get("availableDaysInAWeek");return e&&e.value>=t.value?null:{maxDaysAWeek:!0}};var h=class extends U{constructor(e,f,a=new ne){super(a.group({name:new u(e?.name,[d.required,d.minLength(2)]),availableDaysInAWeek:new u(e?.availableDaysInAWeek,[d.required,d.min(1),d.max(7)]),holidaysForNextSprint:new u(e?.holidaysForNextSprint,{validators:[d.required,d.min(0)]}),meetingDaysAWeek:new u(e?.meetingDaysAWeek,[d.required,d.min(0),ge]),isNewComer:new u(e?.isNewComer)}).controls),this.teammate=e,this.maxDaysInASprintValidator=f,this.formBuilder=a,this.name=this.get("name"),this.availableDaysInAWeek=this.get("availableDaysInAWeek"),this.holidaysForNextSprint=this.get("holidaysForNextSprint"),this.meetingDaysAWeek=this.get("meetingDaysAWeek"),this.isNewComer=this.get("isNewComer")}};function ke(t,e){t&1&&(i(0,"clr-control-error"),o(1,"This is a required field"),r())}function Ee(t,e){if(t&1&&(i(0,"clr-control-error"),o(1),r()),t&2){let f=e.error;n(),W("Must be at least ",f.requiredLength," characters")}}function we(t,e){t&1&&(i(0,"clr-control-error"),o(1,"This is a required field"),r())}function De(t,e){t&1&&(i(0,"clr-control-error"),o(1,"Lower value is 1"),r())}function Ne(t,e){t&1&&(i(0,"clr-control-error"),o(1,"Higher value is 7"),r())}function Fe(t,e){t&1&&(i(0,"clr-control-error"),o(1,"This is a required field"),r())}function We(t,e){t&1&&(i(0,"clr-control-error"),o(1,"Lower value is 0"),r())}function qe(t,e){t&1&&(i(0,"clr-control-error"),o(1,"This fied depends on the number of days in a week, and the number of weeks for a sprint. The value must be lower or equal to the max calculated value"),r())}function Ve(t,e){t&1&&(i(0,"clr-control-error"),o(1,"This is a required field"),r())}function Me(t,e){t&1&&(i(0,"clr-control-error"),o(1,"Lower value is 0"),r())}function Le(t,e){t&1&&(i(0,"clr-control-error"),o(1,"Higher value can't exceed the number of days in a week"),r())}function Be(t,e){if(t&1&&(i(0,"button",16),s(1,"cds-icon",17),r()),t&2){let f=N();m("disabled",f.formTeammate().invalid)}}H.addIcons(O,Y,z);var pt=(()=>{let e=class e{constructor(){this.editedTeammate=w(),this.saved=E(),this.formTeammate=v(()=>{let a=this.editedTeammate()??new b;return new h(a,this.maxDaysInASprintValidator)}),this.teamService=y(_e),this.maxDaysInASprintValidator=y(Ae),this.router=y(G),this.getButtonText=v(()=>this.editedTeammate()?"edit":"add"),this.getButtonIcon=v(()=>this.editedTeammate()?"note":"new")}addTeammate(){if(this.formTeammate().valid)try{let a=new b(this.formTeammate().value.name,this.formTeammate().value.availableDaysInAWeek,this.formTeammate().value.holidaysForNextSprint,this.formTeammate().value.meetingDaysAWeek,!!this.formTeammate().value.isNewComer),l=this.editedTeammate();if(l)this.teamService.editTeammate(a,l),this.saved.emit(!0);else{this.teamService.addTeammate(a);let c=new h(new b,this.maxDaysInASprintValidator);this.formTeammate().reset(c.value)}}catch{}}};e.\u0275fac=function(l){return new(l||e)},e.\u0275cmp=g({type:e,selectors:[["app-add-teammate"]],inputs:{editedTeammate:[A.SignalBased,"editedTeammate"]},outputs:{saved:"saved"},standalone:!0,features:[q],decls:44,vars:19,consts:[["clrForm","","clrLayout","horizontal",3,"ngSubmit","formGroup"],["for","name"],["id","name","clrInput","","type","text","formControlName","name","required","","minlength","2"],[4,"clrIfError"],["for","availableDaysInAWeek"],["id","availableDaysInAWeek","clrInput","","type","number","min","1","max","7","step","0.5","required","","formControlName","availableDaysInAWeek"],["for","holidaysForNextSprint"],["id","holidaysForNextSprint","clrInput","","type","number","min","0","step","0.5","required","","formControlName","holidaysForNextSprint"],["for","meetingDaysAWeek"],["id","meetingDaysAWeek","clrInput","","type","number","step","0.1","min","0","required","","formControlName","meetingDaysAWeek"],["for","isNewTeammate"],["id","isNewTeammate","clrCheckbox","","type","checkbox","formControlName","isNewComer","name","isNewComer","value","1"],[1,"clr-row"],[1,"clr-col-2"],["type","submit","aria-label","save and add a new teammate",1,"btn","btn-icon","btn-primary","btn-block",3,"disabled"],["class","btn btn-icon btn-secondary btn-block","type","submit","aria-label","save and redirect to list teammate","title","save and redirect to list teammate",3,"disabled",4,"ngIf"],["type","submit","aria-label","save and redirect to list teammate","title","save and redirect to list teammate",1,"btn","btn-icon","btn-secondary","btn-block",3,"disabled"],["shape","logout"]],template:function(l,c){l&1&&(i(0,"h1"),o(1),V(2,"teammateFormTitle"),r(),i(3,"form",0),D("ngSubmit",function(){return c.addTeammate()}),i(4,"clr-input-container")(5,"label",1),o(6,"Name: "),r(),s(7,"input",2),i(8,"clr-control-helper"),o(9,"You must fill a name"),r(),p(10,ke,2,0,"clr-control-error",3)(11,Ee,2,1,"clr-control-error",3),r(),i(12,"clr-input-container")(13,"label",4),o(14,"Available days in a week: "),r(),s(15,"input",5),p(16,we,2,0,"clr-control-error",3)(17,De,2,0,"clr-control-error",3)(18,Ne,2,0,"clr-control-error",3),r(),i(19,"clr-input-container")(20,"label",6),o(21,"Holidays for next sprint: "),r(),s(22,"input",7),p(23,Fe,2,0,"clr-control-error",3)(24,We,2,0,"clr-control-error",3)(25,qe,2,0,"clr-control-error",3),r(),i(26,"clr-input-container")(27,"label",8),o(28,"Meeting days in a week (float) : "),r(),s(29,"input",9),p(30,Ve,2,0,"clr-control-error",3)(31,Me,2,0,"clr-control-error",3)(32,Le,2,0,"clr-control-error",3),r(),i(33,"clr-checkbox-container")(34,"label",10),o(35,"Is new teammate ?"),r(),i(36,"clr-checkbox-wrapper"),s(37,"input",11),r()(),i(38,"div",12)(39,"div",13)(40,"button",14),s(41,"cds-icon"),r()(),i(42,"div",13),p(43,Be,2,1,"button",15),r()()()),l&2&&(n(),F(M(2,17,c.editedTeammate())),n(2),m("formGroup",c.formTeammate()),n(7),m("clrIfError","required"),n(),m("clrIfError","minlength"),n(5),m("clrIfError","required"),n(),m("clrIfError","min"),n(),m("clrIfError","max"),n(5),m("clrIfError","required"),n(),m("clrIfError","min"),n(),m("clrIfError","maxDaysASprint"),n(5),m("clrIfError","required"),n(),m("clrIfError","min"),n(),m("clrIfError","maxDaysAWeek"),n(8),m("disabled",c.formTeammate().invalid),x("title",c.getButtonText()),n(),x("shape",c.getButtonIcon()),n(2),m("ngIf",!c.editedTeammate))},dependencies:[B,L,R,P,j,me,X,J,Z,$,K,Q,ae,oe,ie,re,ee,te,xe,de,le,ce,pe,se,ue,he,ye,fe,be,ve,Se],encapsulation:2});let t=e;return t})();export{pt as a};
