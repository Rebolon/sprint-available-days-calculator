import{a as x,b as Te}from"./chunk-7CMTOLBX.js";import{A as J,B as K,C as Q,D as U,E as X,F as Z,G as ee,H as te,I as re,J as ie,K as ae,L as ne,M as oe,N as le,O as me,P as ce,Q as de,R as se,S as pe,T as ue,U as fe,V as he,e as L,ga as ye,i as B,ia as ve,j as G,ja as xe,n as j,o as H,p as P,t as R,u as O,v as d,w as z,x as Y,y as $,z as u}from"./chunk-WYV4TGDT.js";import{G as C,Ha as o,Ib as v,U as _,Wa as p,Xa as E,Ya as l,Z as S,_ as y,_a as w,bb as i,ca as I,cb as r,db as s,fa as A,gb as D,hb as N,nb as n,ob as F,pb as W,s as b,sb as q,tb as V,ub as M,xa as g,ya as k}from"./chunk-R2U2M3OE.js";var Ce=(()=>{let e=class e{transform(a,...m){return a===void 0?"Add new teammate":`Edit ${a.name}`}};e.\u0275fac=function(m){return new(m||e)},e.\u0275pipe=A({name:"teammateFormTitle",type:e,pure:!0,standalone:!0});let t=e;return t})();var _e=(()=>{let e=class e{constructor(a){this.parametersService=a}validate(a){let m=a.get("availableDaysInAWeek"),c=a.get("holidaysForNextSprint");return ye(this.parametersService.getParameters).pipe(b(T=>m&&c&&m.value*T.nbWeeksForOneSprint>=c.value?{maxDaysASprint:!0}:null),C(500))}};e.\u0275fac=function(m){return new(m||e)(S(ve))},e.\u0275prov=_({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Se=t=>{let e=t.parent?.get("availableDaysInAWeek");return e&&e.value>=t.value?null:{maxDaysAWeek:!0}};var h=class extends ${constructor(e,f,a=new re){super(a.group({name:new u(e?.name,[d.required,d.minLength(2)]),availableDaysInAWeek:new u(e?.availableDaysInAWeek,[d.required,d.min(1),d.max(7)]),holidaysForNextSprint:new u(e?.holidaysForNextSprint,{validators:[d.required,d.min(0)]}),meetingDaysAWeek:new u(e?.meetingDaysAWeek,[d.required,d.min(0),Se]),isNewComer:new u(e?.isNewComer)}).controls),this.teammate=e,this.maxDaysInASprintValidator=f,this.formBuilder=a,this.name=this.get("name"),this.availableDaysInAWeek=this.get("availableDaysInAWeek"),this.holidaysForNextSprint=this.get("holidaysForNextSprint"),this.meetingDaysAWeek=this.get("meetingDaysAWeek"),this.isNewComer=this.get("isNewComer")}};function Ie(t,e){t&1&&(i(0,"clr-control-error"),n(1,"This is a required field"),r())}function Ae(t,e){if(t&1&&(i(0,"clr-control-error"),n(1),r()),t&2){let f=e.error;o(),W("Must be at least ",f.requiredLength," characters")}}function ge(t,e){t&1&&(i(0,"clr-control-error"),n(1,"This is a required field"),r())}function ke(t,e){t&1&&(i(0,"clr-control-error"),n(1,"Lower value is 1"),r())}function Ee(t,e){t&1&&(i(0,"clr-control-error"),n(1,"Higher value is 7"),r())}function we(t,e){t&1&&(i(0,"clr-control-error"),n(1,"This is a required field"),r())}function De(t,e){t&1&&(i(0,"clr-control-error"),n(1,"Lower value is 0"),r())}function Ne(t,e){t&1&&(i(0,"clr-control-error"),n(1,"This fied depends on the number of days in a week, and the number of weeks for a sprint. The value must be lower or equal to the max calculated value"),r())}function Fe(t,e){t&1&&(i(0,"clr-control-error"),n(1,"This is a required field"),r())}function We(t,e){t&1&&(i(0,"clr-control-error"),n(1,"Lower value is 0"),r())}function qe(t,e){t&1&&(i(0,"clr-control-error"),n(1,"Higher value can't exceed the number of days in a week"),r())}function Ve(t,e){if(t&1&&(i(0,"button",16),s(1,"app-icon",17),r()),t&2){let f=N();l("disabled",f.formTeammate().invalid)}}G.addIcons(j,P,H);var ot=(()=>{let e=class e{constructor(){this.editedTeammate=k(),this.saved=g(),this.formTeammate=v(()=>{let a=this.editedTeammate()??new x;return new h(a,this.maxDaysInASprintValidator)}),this.teamService=y(xe),this.maxDaysInASprintValidator=y(_e),this.router=y(L),this.getButtonText=v(()=>this.editedTeammate()?"edit":"add"),this.getButtonIcon=v(()=>this.editedTeammate()?"note":"new")}addTeammate(){if(this.formTeammate().valid)try{let a=new x(this.formTeammate().value.name,this.formTeammate().value.availableDaysInAWeek,this.formTeammate().value.holidaysForNextSprint,this.formTeammate().value.meetingDaysAWeek,!!this.formTeammate().value.isNewComer),m=this.editedTeammate();if(m)this.teamService.editTeammate(a,m),this.saved.emit(!0);else{this.teamService.addTeammate(a);let c=new h(new x,this.maxDaysInASprintValidator);this.formTeammate().reset(c.value)}}catch{}}};e.\u0275fac=function(m){return new(m||e)},e.\u0275cmp=I({type:e,selectors:[["app-add-teammate"]],inputs:{editedTeammate:[1,"editedTeammate"]},outputs:{saved:"saved"},standalone:!0,features:[q],decls:44,vars:19,consts:[["clrForm","","clrLayout","horizontal",3,"ngSubmit","formGroup"],["for","name"],["id","name","clrInput","","type","text","formControlName","name","required","","minlength","2"],[4,"clrIfError"],["for","availableDaysInAWeek"],["id","availableDaysInAWeek","clrInput","","type","number","min","1","max","7","step","0.5","required","","formControlName","availableDaysInAWeek"],["for","holidaysForNextSprint"],["id","holidaysForNextSprint","clrInput","","type","number","min","0","step","0.5","required","","formControlName","holidaysForNextSprint"],["for","meetingDaysAWeek"],["id","meetingDaysAWeek","clrInput","","type","number","step","0.1","min","0","required","","formControlName","meetingDaysAWeek"],["for","isNewTeammate"],["id","isNewTeammate","clrCheckbox","","type","checkbox","formControlName","isNewComer","name","isNewComer","value","1"],[1,"clr-row"],[1,"clr-col-2"],["type","submit","aria-label","save and add a new teammate",1,"btn","btn-icon","btn-primary","btn-block",3,"disabled"],[3,"shape"],["type","submit","aria-label","save and redirect to list teammate","title","save and redirect to list teammate",1,"btn","btn-icon","btn-secondary","btn-block",3,"disabled"],["shape","logout"]],template:function(m,c){m&1&&(i(0,"h1"),n(1),V(2,"teammateFormTitle"),r(),i(3,"form",0),D("ngSubmit",function(){return c.addTeammate()}),i(4,"clr-input-container")(5,"label",1),n(6,"Name: "),r(),s(7,"input",2),i(8,"clr-control-helper"),n(9,"You must fill a name"),r(),p(10,Ie,2,0,"clr-control-error",3)(11,Ae,2,1,"clr-control-error",3),r(),i(12,"clr-input-container")(13,"label",4),n(14,"Available days in a week: "),r(),s(15,"input",5),p(16,ge,2,0,"clr-control-error",3)(17,ke,2,0,"clr-control-error",3)(18,Ee,2,0,"clr-control-error",3),r(),i(19,"clr-input-container")(20,"label",6),n(21,"Holidays for next sprint: "),r(),s(22,"input",7),p(23,we,2,0,"clr-control-error",3)(24,De,2,0,"clr-control-error",3)(25,Ne,2,0,"clr-control-error",3),r(),i(26,"clr-input-container")(27,"label",8),n(28,"Meeting days in a week (float) : "),r(),s(29,"input",9),p(30,Fe,2,0,"clr-control-error",3)(31,We,2,0,"clr-control-error",3)(32,qe,2,0,"clr-control-error",3),r(),i(33,"clr-checkbox-container")(34,"label",10),n(35,"Is new teammate ?"),r(),i(36,"clr-checkbox-wrapper"),s(37,"input",11),r()(),i(38,"div",12)(39,"div",13)(40,"button",14),s(41,"app-icon",15),r()(),i(42,"div",13),p(43,Ve,2,1,"button",16),r()()()),m&2&&(o(),F(M(2,17,c.editedTeammate())),o(2),l("formGroup",c.formTeammate()),o(7),l("clrIfError","required"),o(),l("clrIfError","minlength"),o(5),l("clrIfError","required"),o(),l("clrIfError","min"),o(),l("clrIfError","max"),o(5),l("clrIfError","required"),o(),l("clrIfError","min"),o(),l("clrIfError","maxDaysASprint"),o(5),l("clrIfError","required"),o(),l("clrIfError","min"),o(),l("clrIfError","maxDaysAWeek"),o(8),l("disabled",c.formTeammate().invalid),E("title",c.getButtonText()),o(),l("shape",c.getButtonIcon()),o(2),w(c.editedTeammate?-1:43))},dependencies:[B,ie,J,O,K,R,z,Y,ee,te,Z,X,Q,U,he,oe,ae,ne,me,le,ce,se,pe,de,fe,ue,Ce,Te],encapsulation:2});let t=e;return t})();export{ot as a};
