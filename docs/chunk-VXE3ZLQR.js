import{a as v,b as ye,c as be}from"./chunk-ZAQDORHB.js";import{A as $,B as u,C as J,D as K,E as Q,F as X,G as Z,H as ee,I as te,J as re,K as ie,L as ae,N as ne,O as oe,P as me,Q as le,R as ce,S as de,T as se,U as pe,V as ue,W as fe,X as he,Y as ve,a as q,c as V,f as M,i as L,j as R,k as B,l as j,p as G,q as H,r as O,v as P,w as z,x as d,y as U,z as Y}from"./chunk-4ADYIAMV.js";import{$a as a,G as C,Ga as o,Ha as h,U as I,Ua as p,Va as b,Wa as c,Z as _,ab as r,ba as S,bb as s,ea as A,fa as g,gb as k,hb as E,ob as n,pb as w,qb as D,s as T,tb as F,ub as N,vb as W}from"./chunk-KYEXPK5P.js";var xe=t=>{let e=t.parent?.get("availableDaysInAWeek");return e&&e.value>=t.value?null:{maxDaysAWeek:!0}};var y=class extends ${constructor(e,f,i=new ie){super(i.group({name:new u(e?.name,[d.required,d.minLength(2)]),availableDaysInAWeek:new u(e?.availableDaysInAWeek,[d.required,d.min(1),d.max(7)]),holidaysForNextSprint:new u(e?.holidaysForNextSprint,{validators:[d.required,d.min(0)]}),meetingDaysAWeek:new u(e?.meetingDaysAWeek,[d.required,d.min(0),xe]),isNewComer:new u(e?.isNewComer)}).controls),this.teammate=e,this.maxDaysInASprintValidator=f,this.formBuilder=i,this.name=this.get("name"),this.availableDaysInAWeek=this.get("availableDaysInAWeek"),this.holidaysForNextSprint=this.get("holidaysForNextSprint"),this.meetingDaysAWeek=this.get("meetingDaysAWeek"),this.isNewComer=this.get("isNewComer")}};var Ce=(()=>{let e=class e{transform(i,...m){return i===void 0?"Add new teammate":`Edit ${i.name}`}};e.\u0275fac=function(m){return new(m||e)},e.\u0275pipe=A({name:"teammateFormTitle",type:e,pure:!0,standalone:!0});let t=e;return t})();var Ie=(()=>{let e=class e{constructor(i){this.parametersService=i}validate(i){let m=i.get("availableDaysInAWeek"),l=i.get("holidaysForNextSprint");return this.parametersService.getParameters().pipe(T(x=>m&&l&&m.value*x.nbWeeksForOneSprint>=l.value?{maxDaysASprint:!0}:null),C(500))}};e.\u0275fac=function(m){return new(m||e)(_(B))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ae(t,e){t&1&&(a(0,"clr-control-error"),n(1,"This is a required field"),r())}function ge(t,e){if(t&1&&(a(0,"clr-control-error"),n(1),r()),t&2){let f=e.error;o(),D("Must be at least ",f.requiredLength," characters")}}function ke(t,e){t&1&&(a(0,"clr-control-error"),n(1,"This is a required field"),r())}function Ee(t,e){t&1&&(a(0,"clr-control-error"),n(1,"Lower value is 1"),r())}function we(t,e){t&1&&(a(0,"clr-control-error"),n(1,"Higher value is 7"),r())}function De(t,e){t&1&&(a(0,"clr-control-error"),n(1,"This is a required field"),r())}function Fe(t,e){t&1&&(a(0,"clr-control-error"),n(1,"Lower value is 0"),r())}function Ne(t,e){t&1&&(a(0,"clr-control-error"),n(1,"This fied depends on the number of days in a week, and the number of weeks for a sprint. The value must be lower or equal to the max calculated value"),r())}function We(t,e){t&1&&(a(0,"clr-control-error"),n(1,"This is a required field"),r())}function qe(t,e){t&1&&(a(0,"clr-control-error"),n(1,"Lower value is 0"),r())}function Ve(t,e){t&1&&(a(0,"clr-control-error"),n(1,"Higher value can't exceed the number of days in a week"),r())}function Me(t,e){if(t&1&&(a(0,"button",15),s(1,"cds-icon",16),r()),t&2){let f=E();c("disabled",f.formTeammate.invalid)}}j.addIcons(G,O,H);var ot=(()=>{let e=class e{constructor(i,m,l){this.teamService=i,this.maxDaysInASprintValidator=m,this.router=l,this.editedTeammate=void 0,this.formTeammate={}}ngOnInit(){this.editedTeammate?this.createForm(this.editedTeammate):this.createForm(new v)}ngOnChanges(i){if(i.editedTeammate){if(i.editedTeammate.currentValue===i.editedTeammate.previousValue)return;this.createForm(i.editedTeammate.currentValue)}}addTeammate(i){let m=i==="saveAndRedirect";if(this.formTeammate.valid)try{let l=new v(this.formTeammate.value.name,this.formTeammate.value.availableDaysInAWeek,this.formTeammate.value.holidaysForNextSprint,this.formTeammate.value.meetingDaysAWeek,!!this.formTeammate.value.isNewComer);this.editedTeammate?this.teamService.editTeammate(l,this.editedTeammate):this.teamService.addTeammate(l),this.createForm(new v),m&&this.router.navigateByUrl("manage-team")}catch{}}getButtonText(){return this.editedTeammate?"edit":"add"}getButtonIcon(){return this.editedTeammate?"note":"new"}createForm(i){this.formTeammate=new y(i,this.maxDaysInASprintValidator)}};e.\u0275fac=function(m){return new(m||e)(h(R),h(Ie),h(M))},e.\u0275cmp=S({type:e,selectors:[["app-add-teammate"]],inputs:{editedTeammate:"editedTeammate"},standalone:!0,features:[g,F],decls:44,vars:19,consts:[["clrForm","","clrLayout","horizontal",3,"formGroup","ngSubmit"],["for","name"],["id","name","clrInput","","type","text","formControlName","name","required","","minlength","2"],[4,"clrIfError"],["for","availableDaysInAWeek"],["id","availableDaysInAWeek","clrInput","","type","number","min","1","max","7","step","0.5","required","","formControlName","availableDaysInAWeek"],["for","holidaysForNextSprint"],["id","holidaysForNextSprint","clrInput","","type","number","min","0","step","0.5","required","","formControlName","holidaysForNextSprint"],["for","meetingDaysAWeek"],["id","meetingDaysAWeek","clrInput","","type","number","step","0.1","min","0","required","","formControlName","meetingDaysAWeek"],["clrCheckbox","","type","checkbox","formControlName","isNewComer","name","isNewComer","value","1"],[1,"clr-row"],[1,"clr-col-2"],["name","saveAndRefresh","type","submit","aria-label","save and add a new teammate",1,"btn","btn-icon","btn-primary","btn-block",3,"disabled"],["class","btn btn-icon btn-secondary btn-block","name","saveAndRedirect","type","submit","aria-label","save and redirect to list teammate","title","save and redirect to list teammate",3,"disabled",4,"ngIf"],["name","saveAndRedirect","type","submit","aria-label","save and redirect to list teammate","title","save and redirect to list teammate",1,"btn","btn-icon","btn-secondary","btn-block",3,"disabled"],["shape","logout"]],template:function(m,l){m&1&&(a(0,"h1"),n(1),N(2,"teammateFormTitle"),r(),a(3,"form",0),k("ngSubmit",function(_e){return l.addTeammate(_e.submitter.name)}),a(4,"clr-input-container")(5,"label",1),n(6,"Name: "),r(),s(7,"input",2),a(8,"clr-control-helper"),n(9,"You must fill a name"),r(),p(10,Ae,2,0,"clr-control-error",3)(11,ge,2,1,"clr-control-error",3),r(),a(12,"clr-input-container")(13,"label",4),n(14,"Available days in a week: "),r(),s(15,"input",5),p(16,ke,2,0,"clr-control-error",3)(17,Ee,2,0,"clr-control-error",3)(18,we,2,0,"clr-control-error",3),r(),a(19,"clr-input-container")(20,"label",6),n(21,"Holidays for next sprint: "),r(),s(22,"input",7),p(23,De,2,0,"clr-control-error",3)(24,Fe,2,0,"clr-control-error",3)(25,Ne,2,0,"clr-control-error",3),r(),a(26,"clr-input-container")(27,"label",8),n(28,"Meeting days in a week (float) : "),r(),s(29,"input",9),p(30,We,2,0,"clr-control-error",3)(31,qe,2,0,"clr-control-error",3)(32,Ve,2,0,"clr-control-error",3),r(),a(33,"clr-checkbox-container")(34,"label"),n(35,"Is new teammate ? "),r(),a(36,"clr-checkbox-wrapper"),s(37,"input",10),r()(),a(38,"div",11)(39,"div",12)(40,"button",13),s(41,"cds-icon"),r()(),a(42,"div",12),p(43,Me,2,1,"button",14),r()()()),m&2&&(o(),w(W(2,17,l.editedTeammate)),o(2),c("formGroup",l.formTeammate),o(7),c("clrIfError","required"),o(),c("clrIfError","minlength"),o(5),c("clrIfError","required"),o(),c("clrIfError","min"),o(),c("clrIfError","max"),o(5),c("clrIfError","required"),o(),c("clrIfError","min"),o(),c("clrIfError","maxDaysASprint"),o(5),c("clrIfError","required"),o(),c("clrIfError","min"),o(),c("clrIfError","maxDaysAWeek"),o(8),c("disabled",l.formTeammate.invalid),b("title",l.getButtonText()),o(),b("shape",l.getButtonIcon()),o(2),c("ngIf",!l.editedTeammate))},dependencies:[V,q,be,ye,L,ae,J,z,K,P,U,Y,te,re,ee,Z,Q,X,ve,me,ne,oe,ce,le,de,pe,ue,se,he,fe,Ce],encapsulation:2});let t=e;return t})();export{ot as a};
