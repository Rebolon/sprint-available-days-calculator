import{a as P,b as B,c as T}from"./chunk-AHATCDBX.js";import{A as $,B as J,C as K,D as Q,E as X,F as Z,G as ee,H as te,I as re,J as ie,L as ae,M as ne,N as oe,O as me,P as le,Q as ce,R as se,S as de,T as pe,U as ue,V as fe,W as he,e as V,ha as ve,i as M,j as L,ja as ye,ka as Te,n as R,o as G,p as j,t as H,u as U,v as s,w as O,x as z,y as Y,z as f}from"./chunk-DQM3MINA.js";import{Ab as q,Ea as o,G as C,Hb as y,Pa as k,Sa as g,U as A,Wa as u,_ as p,bb as b,cb as l,eb as w,ib as r,jb as t,kb as d,nb as E,ob as D,s as _,sa as S,ta as I,ub as n,vb as N,wb as F,zb as W}from"./chunk-BUWQDSLL.js";var be=(()=>{class e{transform(a,...m){return a===void 0?"Add new teammate":`Edit ${a.name}`}static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275pipe=g({name:"teammateFormTitle",type:e,pure:!0})}}return e})();var _e=(()=>{class e{constructor(){this.parametersService=p(ye)}validate(a){let m=a.get("availableDaysInAWeek"),c=a.get("holidaysForNextSprint");return ve(this.parametersService.getParameters).pipe(_(h=>m&&c&&m.value*h.nbWeeksForOneSprint>=c.value?{maxDaysASprint:!0}:null),C(500))}static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ce=e=>{let i=e.parent?.get("availableDaysInAWeek");return i&&i.value>=e.value?null:{maxDaysAWeek:!0}};var v=class extends Y{constructor(i,a,m=new re){super(m.group({name:new f(i?.name,[s.required,s.minLength(2)]),availableDaysInAWeek:new f(i?.availableDaysInAWeek,[s.required,s.min(1),s.max(7)]),holidaysForNextSprint:new f(i?.holidaysForNextSprint,{validators:[s.required,s.min(0)]}),meetingDaysAWeek:new f(i?.meetingDaysAWeek,[s.required,s.min(0),Ce]),isNewComer:new f(i?.isNewComer)}).controls),this.teammate=i,this.maxDaysInASprintValidator=a,this.formBuilder=m,this.name=this.get("name"),this.availableDaysInAWeek=this.get("availableDaysInAWeek"),this.holidaysForNextSprint=this.get("holidaysForNextSprint"),this.meetingDaysAWeek=this.get("meetingDaysAWeek"),this.isNewComer=this.get("isNewComer")}};function Ae(e,i){e&1&&(r(0,"clr-control-error"),n(1,"This is a required field"),t())}function Se(e,i){if(e&1&&(r(0,"clr-control-error"),n(1),t()),e&2){let a=i.error;o(),F("Must be at least ",a.requiredLength," characters")}}function Ie(e,i){e&1&&(r(0,"clr-control-error"),n(1,"This is a required field"),t())}function ke(e,i){e&1&&(r(0,"clr-control-error"),n(1,"Lower value is 1"),t())}function ge(e,i){e&1&&(r(0,"clr-control-error"),n(1,"Higher value is 7"),t())}function we(e,i){e&1&&(r(0,"clr-control-error"),n(1,"This is a required field"),t())}function Ee(e,i){e&1&&(r(0,"clr-control-error"),n(1,"Lower value is 0"),t())}function De(e,i){e&1&&(r(0,"clr-control-error"),n(1,"This fied depends on the number of days in a week, and the number of weeks for a sprint. The value must be lower or equal to the max calculated value"),t())}function Ne(e,i){e&1&&(r(0,"clr-control-error"),n(1,"This is a required field"),t())}function Fe(e,i){e&1&&(r(0,"clr-control-error"),n(1,"Lower value is 0"),t())}function We(e,i){e&1&&(r(0,"clr-control-error"),n(1,"Higher value can't exceed the number of days in a week"),t())}function qe(e,i){if(e&1&&(r(0,"button",15),d(1,"cds-icon",16),t()),e&2){let a=D();l("disabled",a.formTeammate().invalid)}}L.addIcons(R,j,G);var lt=(()=>{class e{constructor(){this.editedTeammate=I(),this.saved=S(),this.formTeammate=y(()=>{let a=this.editedTeammate()??new T;return new v(a,this.maxDaysInASprintValidator)}),this.teamService=p(Te),this.maxDaysInASprintValidator=p(_e),this.router=p(V),this.getButtonText=y(()=>this.editedTeammate()?"edit":"add"),this.getButtonIcon=y(()=>this.editedTeammate()?"note":"new")}addTeammate(a){let m=a==="saveAndRedirect";if(this.formTeammate().valid)try{let c=new T(this.formTeammate().value.name,this.formTeammate().value.availableDaysInAWeek,this.formTeammate().value.holidaysForNextSprint,this.formTeammate().value.meetingDaysAWeek,!!this.formTeammate().value.isNewComer),h=this.editedTeammate();if(h)this.teamService.editTeammate(c,h),this.saved.emit(!0);else if(this.teamService.addTeammate(c),m)this.router.navigateByUrl("manage-team");else{let x=new v(new T,this.maxDaysInASprintValidator);this.formTeammate().reset(x.value),this.formTeammate().markAsPristine(),this.formTeammate().markAsUntouched(),this.formTeammate().controls.name.markAsUntouched(),this.formTeammate().controls.name.markAsPristine()}}catch{}}static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275cmp=k({type:e,selectors:[["app-add-teammate"]],inputs:{editedTeammate:[1,"editedTeammate"]},outputs:{saved:"saved"},decls:44,vars:19,consts:[["clrForm","","clrLayout","horizontal",3,"ngSubmit","formGroup"],["for","name"],["id","name","clrInput","","type","text","formControlName","name","required","","minlength","2"],[4,"clrIfError"],["for","availableDaysInAWeek"],["id","availableDaysInAWeek","clrInput","","type","number","min","1","max","7","step","0.5","required","","formControlName","availableDaysInAWeek"],["for","holidaysForNextSprint"],["id","holidaysForNextSprint","clrInput","","type","number","min","0","step","0.5","required","","formControlName","holidaysForNextSprint"],["for","meetingDaysAWeek"],["id","meetingDaysAWeek","clrInput","","type","number","step","0.1","min","0","required","","formControlName","meetingDaysAWeek"],["for","isNewTeammate"],["id","isNewTeammate","clrCheckbox","","type","checkbox","formControlName","isNewComer","name","isNewComer","value","1"],[1,"clr-row"],[1,"clr-col-2"],["type","submit","aria-label","save and add a new teammate","title","save and add a new teammate","name","saveAndRefresh",1,"btn","btn-icon","btn-primary","btn-block",3,"disabled"],["type","submit","aria-label","save and redirect to list teammate","title","save and redirect to list teammate","name","saveAndRedirect",1,"btn","btn-icon","btn-secondary","btn-block",3,"disabled"],["shape","logout"]],template:function(m,c){m&1&&(r(0,"h1"),n(1),W(2,"teammateFormTitle"),t(),r(3,"form",0),E("ngSubmit",function(x){return c.addTeammate(x.submitter.name)}),r(4,"clr-input-container")(5,"label",1),n(6,"Name: "),t(),d(7,"input",2),r(8,"clr-control-helper"),n(9,"You must fill a name"),t(),u(10,Ae,2,0,"clr-control-error",3)(11,Se,2,1,"clr-control-error",3),t(),r(12,"clr-input-container")(13,"label",4),n(14,"Available days in a week: "),t(),d(15,"input",5),u(16,Ie,2,0,"clr-control-error",3)(17,ke,2,0,"clr-control-error",3)(18,ge,2,0,"clr-control-error",3),t(),r(19,"clr-input-container")(20,"label",6),n(21,"Holidays for next sprint: "),t(),d(22,"input",7),u(23,we,2,0,"clr-control-error",3)(24,Ee,2,0,"clr-control-error",3)(25,De,2,0,"clr-control-error",3),t(),r(26,"clr-input-container")(27,"label",8),n(28,"Meeting days in a week (float) : "),t(),d(29,"input",9),u(30,Ne,2,0,"clr-control-error",3)(31,Fe,2,0,"clr-control-error",3)(32,We,2,0,"clr-control-error",3),t(),r(33,"clr-checkbox-container")(34,"label",10),n(35,"Is new teammate ?"),t(),r(36,"clr-checkbox-wrapper"),d(37,"input",11),t()(),r(38,"div",12)(39,"div",13)(40,"button",14),d(41,"cds-icon"),t()(),r(42,"div",13),u(43,qe,2,1,"button",15),t()()()),m&2&&(o(),N(q(2,17,c.editedTeammate())),o(2),l("formGroup",c.formTeammate()),o(7),l("clrIfError","required"),o(),l("clrIfError","minlength"),o(5),l("clrIfError","required"),o(),l("clrIfError","min"),o(),l("clrIfError","max"),o(5),l("clrIfError","required"),o(),l("clrIfError","min"),o(),l("clrIfError","maxDaysASprint"),o(5),l("clrIfError","required"),o(),l("clrIfError","min"),o(),l("clrIfError","maxDaysAWeek"),o(8),l("disabled",c.formTeammate().invalid),b("title",c.getButtonText()),o(),b("shape",c.getButtonIcon()),o(2),w(c.editedTeammate()?-1:43))},dependencies:[B,P,M,ie,$,U,J,H,O,z,ee,te,Z,X,K,Q,he,oe,ae,ne,le,me,ce,de,pe,se,fe,ue,be],encapsulation:2})}}return e})();export{lt as a};
