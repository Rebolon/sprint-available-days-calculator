import{a as G,b as j,c as T}from"./chunk-WWMNHM4F.js";import{A as Q,B as X,C as Z,D as ee,E as te,F as re,G as ie,H as ae,I as ne,J as oe,L as me,M as le,N as ce,O as se,P as de,Q as pe,R as ue,S as fe,T as he,U as ve,V as ye,W as xe,e as B,ha as Te,i as R,j as P,ja as be,ka as Ce,n as H,o as U,p as O,t as z,u as Y,v as s,w as $,x as J,y as K,z as u}from"./chunk-LSRN43PG.js";import{G as A,Ha as o,Jb as x,U as S,Va as p,Xa as C,Ya as m,Z as I,_ as y,_a as D,ca as k,cb as i,db as r,eb as d,fa as g,hb as N,ib as F,ob as a,pb as W,qb as q,s as _,tb as V,ub as M,vb as L,xa as w,ya as E}from"./chunk-NM6SVMHE.js";var Ae=(()=>{let e=class e{transform(n,...l){return n===void 0?"Add new teammate":`Edit ${n.name}`}};e.\u0275fac=function(l){return new(l||e)},e.\u0275pipe=g({name:"teammateFormTitle",type:e,pure:!0,standalone:!0});let t=e;return t})();var Se=(()=>{let e=class e{constructor(n){this.parametersService=n}validate(n){let l=n.get("availableDaysInAWeek"),c=n.get("holidaysForNextSprint");return Te(this.parametersService.getParameters).pipe(_(h=>l&&c&&l.value*h.nbWeeksForOneSprint>=c.value?{maxDaysASprint:!0}:null),A(500))}};e.\u0275fac=function(l){return new(l||e)(I(be))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ie=t=>{let e=t.parent?.get("availableDaysInAWeek");return e&&e.value>=t.value?null:{maxDaysAWeek:!0}};var v=class extends K{constructor(e,f,n=new ne){super(n.group({name:new u(e?.name,[s.required,s.minLength(2)]),availableDaysInAWeek:new u(e?.availableDaysInAWeek,[s.required,s.min(1),s.max(7)]),holidaysForNextSprint:new u(e?.holidaysForNextSprint,{validators:[s.required,s.min(0)]}),meetingDaysAWeek:new u(e?.meetingDaysAWeek,[s.required,s.min(0),Ie]),isNewComer:new u(e?.isNewComer)}).controls),this.teammate=e,this.maxDaysInASprintValidator=f,this.formBuilder=n,this.name=this.get("name"),this.availableDaysInAWeek=this.get("availableDaysInAWeek"),this.holidaysForNextSprint=this.get("holidaysForNextSprint"),this.meetingDaysAWeek=this.get("meetingDaysAWeek"),this.isNewComer=this.get("isNewComer")}};function ke(t,e){t&1&&(i(0,"clr-control-error"),a(1,"This is a required field"),r())}function ge(t,e){if(t&1&&(i(0,"clr-control-error"),a(1),r()),t&2){let f=e.error;o(),q("Must be at least ",f.requiredLength," characters")}}function we(t,e){t&1&&(i(0,"clr-control-error"),a(1,"This is a required field"),r())}function Ee(t,e){t&1&&(i(0,"clr-control-error"),a(1,"Lower value is 1"),r())}function De(t,e){t&1&&(i(0,"clr-control-error"),a(1,"Higher value is 7"),r())}function Ne(t,e){t&1&&(i(0,"clr-control-error"),a(1,"This is a required field"),r())}function Fe(t,e){t&1&&(i(0,"clr-control-error"),a(1,"Lower value is 0"),r())}function We(t,e){t&1&&(i(0,"clr-control-error"),a(1,"This fied depends on the number of days in a week, and the number of weeks for a sprint. The value must be lower or equal to the max calculated value"),r())}function qe(t,e){t&1&&(i(0,"clr-control-error"),a(1,"This is a required field"),r())}function Ve(t,e){t&1&&(i(0,"clr-control-error"),a(1,"Lower value is 0"),r())}function Me(t,e){t&1&&(i(0,"clr-control-error"),a(1,"Higher value can't exceed the number of days in a week"),r())}function Le(t,e){if(t&1&&(i(0,"button",15),d(1,"cds-icon",16),r()),t&2){let f=F();m("disabled",f.formTeammate().invalid)}}P.addIcons(H,O,U);var ct=(()=>{let e=class e{constructor(){this.editedTeammate=E(),this.saved=w(),this.formTeammate=x(()=>{let n=this.editedTeammate()??new T;return new v(n,this.maxDaysInASprintValidator)}),this.teamService=y(Ce),this.maxDaysInASprintValidator=y(Se),this.router=y(B),this.getButtonText=x(()=>this.editedTeammate()?"edit":"add"),this.getButtonIcon=x(()=>this.editedTeammate()?"note":"new")}addTeammate(n){let l=n==="saveAndRedirect";if(this.formTeammate().valid)try{let c=new T(this.formTeammate().value.name,this.formTeammate().value.availableDaysInAWeek,this.formTeammate().value.holidaysForNextSprint,this.formTeammate().value.meetingDaysAWeek,!!this.formTeammate().value.isNewComer),h=this.editedTeammate();if(h)this.teamService.editTeammate(c,h),this.saved.emit(!0);else if(this.teamService.addTeammate(c),l)this.router.navigateByUrl("manage-team");else{let b=new v(new T,this.maxDaysInASprintValidator);this.formTeammate().reset(b.value),this.formTeammate().markAsPristine(),this.formTeammate().markAsUntouched(),this.formTeammate().controls.name.markAsUntouched(),this.formTeammate().controls.name.markAsPristine()}}catch{}}};e.\u0275fac=function(l){return new(l||e)},e.\u0275cmp=k({type:e,selectors:[["app-add-teammate"]],inputs:{editedTeammate:[1,"editedTeammate"]},outputs:{saved:"saved"},standalone:!0,features:[V],decls:44,vars:19,consts:[["clrForm","","clrLayout","horizontal",3,"ngSubmit","formGroup"],["for","name"],["id","name","clrInput","","type","text","formControlName","name","required","","minlength","2"],[4,"clrIfError"],["for","availableDaysInAWeek"],["id","availableDaysInAWeek","clrInput","","type","number","min","1","max","7","step","0.5","required","","formControlName","availableDaysInAWeek"],["for","holidaysForNextSprint"],["id","holidaysForNextSprint","clrInput","","type","number","min","0","step","0.5","required","","formControlName","holidaysForNextSprint"],["for","meetingDaysAWeek"],["id","meetingDaysAWeek","clrInput","","type","number","step","0.1","min","0","required","","formControlName","meetingDaysAWeek"],["for","isNewTeammate"],["id","isNewTeammate","clrCheckbox","","type","checkbox","formControlName","isNewComer","name","isNewComer","value","1"],[1,"clr-row"],[1,"clr-col-2"],["type","submit","aria-label","save and add a new teammate","title","save and add a new teammate","name","saveAndRefresh",1,"btn","btn-icon","btn-primary","btn-block",3,"disabled"],["type","submit","aria-label","save and redirect to list teammate","title","save and redirect to list teammate","name","saveAndRedirect",1,"btn","btn-icon","btn-secondary","btn-block",3,"disabled"],["shape","logout"]],template:function(l,c){l&1&&(i(0,"h1"),a(1),M(2,"teammateFormTitle"),r(),i(3,"form",0),N("ngSubmit",function(b){return c.addTeammate(b.submitter.name)}),i(4,"clr-input-container")(5,"label",1),a(6,"Name: "),r(),d(7,"input",2),i(8,"clr-control-helper"),a(9,"You must fill a name"),r(),p(10,ke,2,0,"clr-control-error",3)(11,ge,2,1,"clr-control-error",3),r(),i(12,"clr-input-container")(13,"label",4),a(14,"Available days in a week: "),r(),d(15,"input",5),p(16,we,2,0,"clr-control-error",3)(17,Ee,2,0,"clr-control-error",3)(18,De,2,0,"clr-control-error",3),r(),i(19,"clr-input-container")(20,"label",6),a(21,"Holidays for next sprint: "),r(),d(22,"input",7),p(23,Ne,2,0,"clr-control-error",3)(24,Fe,2,0,"clr-control-error",3)(25,We,2,0,"clr-control-error",3),r(),i(26,"clr-input-container")(27,"label",8),a(28,"Meeting days in a week (float) : "),r(),d(29,"input",9),p(30,qe,2,0,"clr-control-error",3)(31,Ve,2,0,"clr-control-error",3)(32,Me,2,0,"clr-control-error",3),r(),i(33,"clr-checkbox-container")(34,"label",10),a(35,"Is new teammate ?"),r(),i(36,"clr-checkbox-wrapper"),d(37,"input",11),r()(),i(38,"div",12)(39,"div",13)(40,"button",14),d(41,"cds-icon"),r()(),i(42,"div",13),p(43,Le,2,1,"button",15),r()()()),l&2&&(o(),W(L(2,17,c.editedTeammate())),o(2),m("formGroup",c.formTeammate()),o(7),m("clrIfError","required"),o(),m("clrIfError","minlength"),o(5),m("clrIfError","required"),o(),m("clrIfError","min"),o(),m("clrIfError","max"),o(5),m("clrIfError","required"),o(),m("clrIfError","min"),o(),m("clrIfError","maxDaysASprint"),o(5),m("clrIfError","required"),o(),m("clrIfError","min"),o(),m("clrIfError","maxDaysAWeek"),o(8),m("disabled",c.formTeammate().invalid),C("title",c.getButtonText()),o(),C("shape",c.getButtonIcon()),o(2),D(c.editedTeammate()?-1:43))},dependencies:[j,G,R,oe,Q,Y,X,z,$,J,ie,ae,re,te,Z,ee,xe,ce,me,le,de,se,pe,fe,he,ue,ye,ve,Ae],encapsulation:2});let t=e;return t})();export{ct as a};
